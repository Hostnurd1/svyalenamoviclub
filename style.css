/* ============================
   MovieClub – style.css v2.3
   ============================ */

/* 0. RESET & BASE TYPOGRAPHY */
*{box-sizing:border-box;margin:0;padding:0}
html,body{width:100%;min-height:100vh}
body{
  font-family:"Inter","Segoe UI",Arial,sans-serif;
  font-size:15px;
  letter-spacing:.2px;
  -webkit-text-size-adjust:100%;
  text-size-adjust:100%;
  background:var(--color-bg);
  color:var(--color-text);
}
ul,li{list-style:none}
button,input,textarea{font:inherit;border:none;outline:none;background:none;color:inherit}
img{max-width:100%;display:block}
a{text-decoration:none;color:inherit}

/* 1. DESIGN TOKENS (CSS vars) */
:root{
  --blue-50:#f2f7fe;
  --blue-100:#e6ecfd;
  --blue-500:#4257e2;
  --blue-600:#3147b0;
  --gray-50:#f6f8fa;
  --gray-200:#e1e6f9;
  --gray-700:#5d647d;
  --yellow-300:#f4d35e;
  --yellow-900:#4b3a00;

  --color-bg:var(--gray-50);
  --color-bg-soft:var(--blue-50);
  --color-border:var(--gray-200);
  --color-primary:var(--blue-500);
  --color-primary-dark:var(--blue-600);
  --color-accent:var(--yellow-300);
  --color-accent-dark:var(--yellow-900);
  --color-text:#131b2e;
  --color-muted:#7683a4;

  --gradient-primary:linear-gradient(95deg,var(--blue-500)60%,#9573fa 100%);
  --gradient-neutral:linear-gradient(90deg,var(--blue-100)0%,var(--blue-50)100%);

  --space:4px;
}
@media(prefers-color-scheme:dark){
  :root{
    --color-bg:#181a1e;
    --color-bg-soft:#232735;
    --color-border:#292e3b;
    --color-text:#f2f4fa;
    --color-muted:#9498b2;
    --gradient-primary:linear-gradient(95deg,#5067d9 60%,#a77dfa 100%);
    --gradient-neutral:linear-gradient(90deg,#232735 0%,#202230 100%);
  }
}

/* 2. LAYOUT CONTAINER */
.container{
  max-width:600px;
  margin:calc(var(--space)*8) auto 0;
  padding:calc(var(--space)*9) calc(var(--space)*6) calc(var(--space)*11);
  background:#fff;
  border-radius:calc(var(--space)*9);
  box-shadow:0 calc(var(--space)*2.5) calc(var(--space)*10) #4257e21a;
}
@media(max-width:650px){
  .container{
    max-width:100%;
    border-radius:0;
    box-shadow:none;
    padding:calc(var(--space)*4) calc(var(--space)*1.5) calc(var(--space)*7);
  }
}

/* 3. UTILITIES */
.text-center{text-align:center}.hidden{display:none!important}

/* 4. USER SWITCH */
.user-switch{display:flex;justify-content:flex-end;gap:14px;margin-bottom:12px}
.avatar-btn{
  display:flex;align-items:center;gap:7px;
  padding:7px 14px;border-radius:16px;cursor:pointer;
  transition:background .16s,box-shadow .13s;
}
.avatar-btn:hover{background:var(--blue-100)}
.avatar-btn.active{
  background:var(--gradient-primary);color:#fff;
  box-shadow:0 2px 10px #4257e218;
}
.avatar-btn:focus-visible{outline:2px solid var(--color-primary);outline-offset:2px}
.avatar-circle{
  width:36px;height:36px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-weight:700;font-size:18px;
  background:var(--blue-100);color:var(--color-primary-dark);
  transition:background .15s,color .14s;
  box-shadow:0 1px 3px #3147b02e
}
.avatar-btn.active .avatar-circle{background:#fff;color:var(--color-primary)}

/* 5. CTA «Что смотреть?» */
.random-btn{
  display:block;width:100%;margin:30px 0 14px;padding:18px 0;
  border-radius:14px;font-size:20px;font-weight:800;letter-spacing:.5px;
  color:#fff;background:var(--gradient-primary);
  box-shadow:0 6px 16px #4257e218;
  transition:background .19s,box-shadow .19s,transform .09s;
}
.random-btn:active,.random-btn:focus-visible{
  background:var(--color-primary-dark);
  box-shadow:0 12px 30px #4257e235;transform:scale(.98)
}
.cta-icon{font-size:24px;margin-right:9px;vertical-align:middle}
#random-out{
  position:fixed;top:16px;left:50%;transform:translateX(-50%);
  max-width:85vw;padding:6px 12px;border-radius:10px;
  font-size:17px;font-weight:700;
  color:var(--color-accent-dark);background:#fff7c7;
  box-shadow:0 1px 5px #f4d35e35;opacity:.95;
  pointer-events:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
}

/* 6. FILTERS & TABS */
.filters{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}
.filter-btn{
  display:flex;align-items:center;gap:5px;
  min-width:44px;min-height:44px;padding:8px 18px;
  font-size:15px;font-weight:500;
  border-radius:9px;border:1px solid var(--color-border);
  background:var(--color-neutral);color:var(--color-primary-dark);
  transition:background .15s,color .14s,border .13s,box-shadow .13s,transform .13s;
}
.filter-btn.active{
  background:var(--color-primary);color:#fff;
  border-color:var(--color-primary-dark);box-shadow:0 2px 10px #4257e222;
}
.filter-btn:focus-visible{outline:2px solid var(--color-primary);z-index:2}
.filter-btn:active{transform:scale(.95)}
.filter-icon{font-size:16px}

.nav-tabs{
  display:flex;justify-content:center;flex-wrap:wrap;
  gap:12px;margin:24px 0 18px;
}
.tab{
  cursor:pointer;min-width:44px;min-height:44px;padding:10px 22px;
  border-radius:10px 10px 0 0;border:1.5px solid var(--color-border);
  background:var(--color-neutral);color:var(--color-primary-dark);
  font-weight:600;font-size:16px;
  transition:background .14s,color .13s,border .12s,box-shadow .13s,transform .11s;
}
.tab.active{
  background:var(--gradient-primary);color:#fff;font-weight:700;
  border-bottom:3px solid var(--color-accent);box-shadow:0 3px 10px #4257e228;
}
.tab:active{transform:scale(.97)}
.tab:focus-visible{outline:2px solid var(--color-primary);z-index:2}

/* 7. SEARCH FIELD */
#movie-search{
  width:100%;padding:9px 12px;margin-bottom:20px;
  border-radius:9px;border:1px solid var(--color-border);
  background:#fff;font-size:15px;
}
#movie-search:focus{
  border-color:var(--color-primary);
  box-shadow:0 0 0 3px #4257e220;
}

/* 8. MOVIE CARD */
.movie-list{margin-top:28px}
.movie{
  display:flex;flex-direction:column;gap:13px;
  margin-bottom:20px;padding:18px 12px 16px;
  border-radius:13px;background:var(--color-bg-soft);
  border:1.5px solid var(--color-border);
  box-shadow:0 3px 12px #4257e11a;
  transition:box-shadow .14s,background .13s;
}
.movie:hover{box-shadow:0 6px 20px #4257e125}
.movie-header{
  display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-bottom:10px
}
.movie-title{font-size:18px;font-weight:800;color:var(--color-primary-dark);letter-spacing:.1px}
.movie-year{font-size:14px;color:var(--color-muted)}
.movie-status{
  margin-left:10px;padding:2px 9px;border-radius:7px;
  font-size:14px;font-weight:500;background:#fff2e6;color:var(--color-accent-dark);
}
.del-btn{
  margin-left:auto;display:flex;align-items:center;justify-content:center;
  width:36px;height:36px;font-size:18px;border-radius:50%;
  color:var(--color-accent-dark);cursor:pointer;
  transition:background .12s,color .13s,transform .11s;
}
.del-btn:active{transform:scale(.93);background:#fff3cd}
.del-btn:focus-visible{box-shadow:0 0 0 3px #ffe3b388}

/* 9. USER BLOCK (rating) */
.user-block{
  display:flex;flex-direction:column;gap:8px;margin-bottom:4px;
  padding:10px 12px 12px;border-radius:9px;background:#f6f8ff;
}
.user-svyat{border-left:3px solid #4d75ee;background:#f6f9ff}
.user-alena{border-left:3px solid #fb72ce;background:#fff6fb}
.user-row{display:flex;align-items:center;gap:9px;margin-bottom:2px}
.user-label{font-size:14px;font-weight:600;color:var(--color-primary)}
.user-block textarea{
  width:100%;min-height:32px;padding:6px 9px;font-size:14px;
  border-radius:7px;background:#f6f8ff;border:1px solid #dbeafe;
}
.user-block textarea:focus{background:#eaf3ff}

.confirm-btn{
  display:block;margin:7px auto 0;padding:7px 22px;
  font-size:15px;font-weight:600;min-width:44px;min-height:44px;
  border-radius:7px;background:var(--gradient-primary);color:#fff;
  box-shadow:0 2px 10px #4257e218;
  transition:background .14s,transform .11s;
}
.confirm-btn:disabled{
  background:var(--blue-100);color:#bbb;box-shadow:none;cursor:not-allowed;
}
.confirm-btn:active{transform:scale(.97);background:var(--color-primary-dark)}

.avg-score{
  float:right;margin-top:8px;padding:2px 11px;
  border-radius:7px;font-size:15px;font-weight:700;
  color:var(--color-accent-dark);background:var(--color-accent);
  box-shadow:0 1px 3px #ffe59d50;
}
.important-note{margin-left:7px;font-size:13px;font-weight:700;color:#fb3640}

/* 10. STAR RATING */
.star-rating{display:flex;align-items:center;gap:4px;margin-bottom:5px;font-size:0;user-select:none}
.star-rating .star{
  width:26px;height:26px;font-size:22px;line-height:1;
  display:inline-block;cursor:pointer;color:#d6d6e0;
  transition:transform .12s;
}
.star-rating .star.filled{color:var(--color-primary);text-shadow:0 3px 8px #4257e212}
.star-rating .star:active{transform:scale(.92)}
.star-rating .star:focus-visible{outline:2px solid var(--color-primary-dark)}

/* 11. SKELETON & TOAST */
.skeleton{
  height:120px;border-radius:12px;margin-bottom:20px;
  background:linear-gradient(90deg,#e3e6ef 25%,#f6f8fa 50%,#e3e6ef 75%);
  background-size:400% 100%;animation:shimmer 1.3s infinite linear;
}
@keyframes shimmer{0%{background-position:-400px 0}100%{background-position:400px 0}}
@media(max-width:650px){.skeleton{height:70px;border-radius:7px}}

.toast{
  position:fixed;left:50%;bottom:80px;transform:translateX(-50%);
  padding:10px 24px;border-radius:14px;font-size:15px;font-weight:500;
  z-index:9999;opacity:.98;background:#fff;color:var(--color-text);
  box-shadow:0 7px 32px #5e81f43a;animation:fadeIn .14s
}
.toast-success{border-left:5px solid var(--color-primary);color:var(--color-primary-dark)}
.toast-error{border-left:5px solid #ff3344;background:#fff2f2;color:#ab202f}
@keyframes fadeIn{from{opacity:0;transform:translate(-50%,20px)}to{opacity:.98;transform:translate(-50%,0)}}

/* 12. MODAL (choose user) */
#user-modal{
  position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
  background:rgba(0,0,0,.35);backdrop-filter:blur(3px);z-index:2000;
}
.modal-content{
  width:260px;padding:24px 20px;border-radius:16px;background:#fff;text-align:center;
  box-shadow:0 15px 40px #0001;
}
.modal-title{font-size:18px;font-weight:700;margin-bottom:18px}
.modal-btn{
  display:block;width:100%;margin-bottom:10px;padding:10px;
  border-radius:12px;font-weight:600;font-size:16px;color:#fff;
  background:var(--gradient-primary);box-shadow:0 3px 12px #4257e218;
  transition:background .15s,transform .1s;
}
.modal-btn:active{transform:scale(.96);background:var(--color-primary-dark)}
@media(prefers-color-scheme:dark){.modal-content{background:var(--color-bg-soft)}}
